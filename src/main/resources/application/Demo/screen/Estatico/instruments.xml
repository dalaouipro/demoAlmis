<?xml version="1.0" encoding="UTF-8"?>

<!--
    Document   : instruments.xml
    Author     : Driss ALAOUI
-->
<screen
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="https://aweframework.gitlab.io/awe/docs/schemas/screen.xsd"
        template="window"
>
    <tag source="center">
        <window id="IstrDtl" label="Instrument details" style="expand">
            <tab id="tabIstr" initial-load="enum" target-action="enumIstr">
                <tabcontainer id="Securities" expandible="horizontal">
                    <grid id="grdSec" initial-load="query" target-action="querIstrSec" style="expand" send-operations="true">
                        <column name="colIstrSecNam" label="Name" component="text"/>
                        <column name="colIstrSecTyp" label="Type" component="text"/>
                        <column name="colIstrSecEmt" label="Emitter" component="text"/>
                        <column name="colIstrSecRtg" label="Rating" component="text"/>
                        <column name="colIstrSecRsk" label="Risk" component="numeric"/>
                        <button id="BtnGrdSecIns" label="BUTTON_NEW" icon="plus-circle">
                            <button-action type="add-row" target="grdSec" silent="true"/>
                        </button>
                        <button id="BtnGrdSecDel" label="BUTTON_DELETE" icon="trash">
                            <button-action type="delete-row" target="grdSec" silent="true"/>
                            <dependency target-type="enable" initial="true">
                                <dependency-element id="grdSec" attribute="selectedRow"/>
                            </dependency>
                        </button>
                    </grid>
                    <chart id="MyChart" label="Test Chart" type="pie_3d" initial-load="query" target-action="QuerChart" style="expand">
                        <x-axis label="typ"/>
                        <y-axis label="cnt"/>
                        <chart-serie id="MySerie" x-value="typ" y-value="cnt" label="amount"/>
                    </chart>
                </tabcontainer>
                <tabcontainer id="Pricing">
                    <grid id="grdPrc" initial-load="query" target-action="querIstrPrc" style="expand" send-operations="true">
                        <column name="colIstrPrcSec" label="Security" component="text"/>
                        <column name="colIstrPrcDate" label="Date" component="date"/>
                        <column name="colIstrPrcPrc" label="Pricing" component="numeric"/>
                        <button id="BtnGrdPrcIns" label="BUTTON_NEW" icon="plus-circle">
                            <button-action type="add-row" target="grdPrc" silent="true"/>
                        </button>
                        <button id="BtnGrdPrcDel" label="BUTTON_DELETE" icon="trash">
                            <button-action type="delete-row" target="grdPrc" silent="true"/>
                            <dependency target-type="enable" initial="true">
                                <dependency-element id="grdPrc" attribute="selectedRow"/>
                            </dependency>
                        </button>
                    </grid>
                </tabcontainer>
                <tabcontainer id="Clients">
                    <grid id="grdCli" initial-load="query" target-action="querIstrCli" style="expand" send-operations="true">
                        <column name="colIstrCliNam" label="Name" component="text"/>
                        <button id="BtnGrdCliIns" label="BUTTON_NEW" icon="plus-circle">
                            <button-action type="add-row" target="grdCli" silent="true"/>
                        </button>
                        <button id="BtnGrdCliDel" label="BUTTON_DELETE" icon="trash">
                            <button-action type="delete-row" target="grdCli" silent="true"/>
                            <dependency target-type="enable" initial="true">
                                <dependency-element id="grdCli" attribute="selectedRow"/>
                            </dependency>
                        </button>
                    </grid>
                </tabcontainer>
                <tabcontainer id="Portfolio">
                    <grid id="grdPfl" initial-load="query" target-action="querIstrPfl" style="expand" send-operations="true">
                        <column name="colIstrPflCod" label="Code" component="text"/>
                        <column name="colIstrPflCli" label="Client" component="text"/>
                        <button id="BtnGrdPflIns" label="BUTTON_NEW" icon="plus-circle">
                            <button-action type="add-row" target="grdPfl" silent="true"/>
                        </button>
                        <button id="BtnGrdPflDel" label="BUTTON_DELETE" icon="trash">
                            <button-action type="delete-row" target="grdPfl" silent="true"/>
                            <dependency target-type="enable" initial="true">
                                <dependency-element id="grdPfl" attribute="selectedRow"/>
                            </dependency>
                        </button>
                    </grid>
                </tabcontainer>
                <tabcontainer id="Position">
                    <grid id="grdPos" initial-load="query" target-action="querIstrPos" style="expand" send-operations="true">
                        <column name="colIstrPosPfl" label="PortFolio" component="text"/>
                        <column name="colIstrPosSec" label="Security" component="text"/>
                        <column name="colIstrPosQty" label="Quantity" component="numeric"/>
                        <button id="BtnGrdPosIns" label="BUTTON_NEW" icon="plus-circle">
                            <button-action type="add-row" target="grdPos" silent="true"/>
                        </button>
                        <button id="BtnGrdPosDel" label="BUTTON_DELETE" icon="trash">
                            <button-action type="delete-row" target="grdPos" silent="true"/>
                            <dependency target-type="enable" initial="true">
                                <dependency-element id="grdPos" attribute="selectedRow"/>
                            </dependency>
                        </button>
                    </grid>
                </tabcontainer>
            </tab>
        </window>


        <window id="IstrVal" label="Instrument valuation" expandible="vertical" style="expand">
            <tab id="tabVal" initial-load="enum" target-action="enumVal">
                <tabcontainer id="total">
                    <grid id="grdVal2" initial-load="query" target-action="querIstrValAll" style="expand">
                        <column name="colIstrValPfl2" label="Portfolio" component="text" sortable="false" readonly="true"/>
                        <column name="colIstrValVal2" label="Value" component="numeric" sortable="false">
                        </column>
                    </grid>
                </tabcontainer>
                <tabcontainer id="details">
                    <tag type="div" style="panel-body static">
                        <criteria component="select" id="crtValPfl" label="Portfolio" optional="true" style="col-lg-2" initial-load="query" target-action="querIstrFiltPfl"/>
                        <criteria component="select" id="crtValSec" label="Security" optional="true" style="col-lg-2" initial-load="query" target-action="querIstrFiltSec"/>
                        <criteria component="filtered-calendar" id="crtValDat" label="Date" style="col-lg-2" initial-load="query" target-action="querIstrFiltDat"/>
                        <criteria component="select" id="crtValPrc" label="Pricing" optional="true" style="col-lg-2" initial-load="query" target-action="querIstrFiltPrc"/>
                        <criteria component="select" id="crtValQty" label="Quantity" optional="true" style="col-lg-2" initial-load="query" target-action="querIstrFiltQty"/>
                    </tag>
                    <tag type="div" style="panel-footer">
                        <button id="BtnIstrValSrch" label="search" icon="search" style="col-lg">
                            <button-action type="server" server-action="data" target-action="querIstrVal" target="grdVal"/>
                        </button>
                        <button id="BtnIstrValRset" label="refresh" icon="refresh" style="col-lg">
                            <button-action type="restore" target="crtValPfl"/>
                            <button-action type="restore" target="crtValSec"/>
                            <button-action type="restore" target="crtValDat"/>
                            <button-action type="restore" target="crtValPrc"/>
                            <button-action type="restore" target="crtValQty"/>
                            <button-action type="filter" target="grdVal"/>
                        </button>
                    </tag>

                    <grid id="grdVal" target-action="querIstrVal" style="expand" max="8">
                        <!--
                        <dependency target-type="hide" initial="true">
                            <dependency-element id="grdVal"/>
                        </dependency>
                        <dependency target-type="show">
                            <dependency-element id="BtnIstrValSrch" event="click"/>
                        </dependency>
                        -->
                        <column name="colIstrValPfl" label="Portfolio" component="text" readonly="true"/>
                        <column name="colIstrValSec" label="Security" component="text" readonly="true"/>
                        <column name="colIstrValDat" component="filtered-calendar" label="Date" readonly="true"/>
                        <column name="colIstrValPrc" label="Pricing" component="select" readonly="true"/>
                        <column name="colIstrValQty" label="Quantity" component="numeric" readonly="true"/>
                        <column name="colIstrValVal" label="Value" component="numeric"/>
                    </grid>
                </tabcontainer>
            </tab>
        </window>

        <!--
        <button id="btnTest" label="test"/>

        <criteria id="CrtIstrTest1" component="numeric" server-action="value" target-action="querIstrTest1">
            <dependency initial="true">
                <dependency-element id="btnTest" event="click"/>
                <dependency-action type="filter" target="CrtIstrTest1"/>
            </dependency>
        </criteria>

        <criteria id="CrtIstrTest2" component="select" server-action="data" initial-load="query" target-action="querIstrTest2">
            <dependency initial="true">
                <dependency-element id="btnTest" event="click"/>
                <dependency-action type="filter" target="CrtIstrTest"/>
            </dependency>
        </criteria>
        -->
    </tag>
</screen>